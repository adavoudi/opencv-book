<!DOCTYPE html>
<html lang="Farsi">
<head>

<title>پردازش تصویر در OpenCV | بزرگ‌نمایی و کوچک‌نمایی تصویر</title>

<meta charset="utf-8">
<meta name="description" content="">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property="og:type" content="website">
<meta property="og:title" content="">
<meta property="og:url" content="https://h4iku.github.io/opencv-book">
<meta property="og:site_name" content="پردازش تصویر در OpenCV">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="">
<meta name="twitter:description" content="">

  <link rel="short icon" href="/static/img/mira.png">
  <link href="/opencv-book/static/node_modules/bulma-rtl/css/bulma-rtl.css" rel="stylesheet">
  <link href="/opencv-book/static/zero60/style.css" rel="stylesheet">
  <link href="/opencv-book/static/zero60/agate.css" rel="stylesheet">
  <link href="https://cdn.rawgit.com/rastikerdar/sahel-font/v1.0.0-alpha13/dist/font-face.css" rel="stylesheet" type="text/css" />
 

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/katex.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.9.0/contrib/auto-render.min.js"></script>

<!-- <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-MML-AM_CHTML' async></script> -->

</head>
<body>

  <header class="hero is-info columns">
    <div class="hero-body">
        <div class="container">
            <h1 class="title">
              <a href="/opencv-book">
                پردازش تصویر در OpenCV
              </a>
            </h1>
            <h2 class="subtitle"></h2>
        </div>
    </div>
    <span class="sidebar_toggle">
        <em class="open-icon"></em>
    </span>
</header>

  <section class="main-content columns is-fullheight">
    <aside id="sidebar" class="column is-one-quarter-desktop is-one-third-tablet section ">
  <div class="sidebar__inner">
    <ul class="menu-list">
        
        <li>
        
        
          <span class="season">فصل اول - معرفی</span>
          <ul>
        
            <li>
              <a href="/opencv-book/chapter01/lesson01/ocv-intro/">- معرفی اُ سی وی</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter01/lesson02/load-show-save/">- بارگذاری، نمایش و ذخیره تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter01/lesson03/mat-class/">- کلاس MAT</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter01/lesson04/store-retrieve/">- ذخیره سازی و بازیابی اطلاعات</a>
            </li>
        
        </ul>
        </li>
        
        <li>
        
        
          <span class="season">فصل دوم - حوزهٔ مکان</span>
          <ul>
        
            <li>
              <a href="/opencv-book/chapter02/lesson01/simple-shapes/">- شکل‌های هندسی ساده</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson02/linear-blend/">- ترکیب خطی دو تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson03/linear-filter/">- فیلتر خطی</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson04/affine-transformation/">- تبدیل اَفاین</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson05/map/">- نگاشت</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson06/contrast-brightness/">- تغییر کنتراست و روشنایی تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson07/smoothing/">- هموار سازی تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson08/border/">- اضافه کردن قاب به تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson09/drawing/">- مولد عدد تصادفی و ترسیم متن</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson10/zooming/">- بزرگ‌نمایی و کوچک‌نمایی تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson11/threshold/">- آستانه‌گذاری</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson12/image-histogram/">- بافت‌نگار تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson13/equalize-histogram/">- برابرسازی بافت‌نگار</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson14/sobel-operator/">- عملگر سابل</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson15/laplace-operator/">- عملگر لاپلاس</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson16/canny-operator/">- عملگر کَنی</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson17/contours/">- کانتورهای تصویر</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson18/convex-hull/">- پوش محدب</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson19/contours-frames/">- قاب‌های مستطیلی و دایره‌ای برای کانتورها</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter02/lesson20/contours-rotated-frames/">- قاب‌های چرخیدهٔ مستطیلی و بیضوی برای کانتورها</a>
            </li>
        
        </ul>
        </li>
        
        <li>
        
        
          <span class="season">فصل سوم - حوزهٔ زمان</span>
          <ul>
        
            <li>
              <a href="/opencv-book/chapter03/lesson01/discrete-fourier/">- تبدیل فوریهٔ گسسته</a>
            </li>
        
        </ul>
        </li>
        
        <li>
        
        
          <span class="season">فصل چهارم - مورفولوژی</span>
          <ul>
        
            <li>
              <a href="/opencv-book/chapter04/lesson01/erode-dilate/">- فرسایش و گشایش</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter04/lesson02/morphology-transformations/">- تبدیل‌های مورفولوژی پیچیده</a>
            </li>
        
        </ul>
        </li>
        
        <li>
        
        
          <span class="season">فصل پنجم - شناسایی الگو</span>
          <ul>
        
            <li>
              <a href="/opencv-book/chapter05/lesson01/compare-histograms/">- مقایسه بافت‌نگارها</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter05/lesson02/back-projection/">- بَک پروجکشن</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter05/lesson03/pattern-matching/">- تطبیق الگو</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter05/lesson04/hough-line-transform/">- تبدیل خط هُو</a>
            </li>
        
        
            <li>
              <a href="/opencv-book/chapter05/lesson05/hough-circle-transform/">- تبدیل دایره هُو</a>
            </li>
        
        </ul>
        </li>
        
    </ul>
  </div>
</aside>

    <div class="container column">
        <div class="section" id="content">

  
      
          <h1 class="list">فصل دوم - حوزهٔ مکان</h1>
      

    <h3 class="list">بزرگ‌نمایی و کوچک‌نمایی تصویر</h3>

    <div class="content-body content">
    <a name="more"></a>
<p>معمولاً نیاز است که اندازهٔ یک عکس را تغییر داد. در اُ سی وی به منظور تغیر اندازهٔ عکس‌ها تابع تبدیل هندسی resize وجود دارد ولی در این بخش به بیان مفهوم هرم تصویر می‌پردازیم که کاربردهای زیادی در برنامه‌های بینایی دارد.</p>

<p>هرم تصویر مجموعه‌ای از تصاویر است که همگی از یک تصویر اصلی سرچشمه گرفته‌اند و به ترتیب کوچک می‌شوند تا به یک اندازهٔ مشخص برسند.</p>

<p>دو نوع هرم تصویر داریم:</p>

<ul>
<li><strong>هرم گوسی</strong><a href="#fn:a" id="fnref:a" class="footnote">1</a>: در این روش برای ساخت هرم از میانگین‌گیری گوسی استفاده می‌شود.</li>
<li><strong>هرم لاپلاسی</strong><a href="#fn:b" id="fnref:b" class="footnote">2</a><strong>:</strong> مشابه هرم گوسی است با این تفاوت که از یک تبدیل لاپلاس برای ساخت هرم استفاده می‌کند.</li>
</ul>

<p>هرم موجود در اُ سی وی از نوع گوسی است.</p>

<p><strong>هرم گوسی:</strong></p>

<p>هرم را به صورت یک مجموعه از لایه‌ها در نظر بگیرید که هر چه لایه در سطح بالاتری قرار گرفته باشد، کوچک‌تر خواهد بود.</p>

<table>
<col align="center" />
<thead>
<tr>
	<th><img src="/opencv-book/media/image50.png" alt="هرم تصویر (سطح زیرین تصویر اصلی است)" id="" /></th>
</tr>
</thead>
<tbody>
<tr>
	<td align="center">هرم تصویر (سطح زیرین تصویر اصلی است)</td>
</tr>
</tbody>
</table>

<p>لایه‌ها از پایین به بالا شماره گذاری شده‌اند. پس لایهٔ i+1 که با$G_{i + 1}$ نشان داده می‌شود، از لایهٔ i که با $G_{i}$ نشان داده می‌شود کوچکتر است.</p>

<p>در هرم گوسی برای تولید لایهٔ i+1 از روی لایه i، به شیوهٔ زیر عمل می‌کنیم:</p>

<ul>
<li><p>$G_{i}$ را با یک کرنل گوسی زیر کانوالو می‌کنیم:</p>

<p><img src="/opencv-book/media/image51.png" alt="mage5" id="mage5" /></p></li>
<li><p>همهٔ سطرها و ستون‌های زوج را پاک می‌کنیم.</p></li>
</ul>

<p>عکس به دست آمده دقیقاً یک چهارم عکس پیشین خواهد بود. با تکرار فرایند بالا روی عکس اصلی (یعنی $G_0$)، می‌توان تمام هرم را درست کرد.</p>

<p>رویهٔ بالا به منظور کوچک نمایی تصویر بود. برای بزرگ‌نمایی تصویر باید مراحل زیر را انجام دهیم:</p>

<ul>
<li><p>ابتدا ابعاد لایه i را دو برابر کرده و سطرها و ستون‌های زوج آن را با صفر پر می‌کنیم.</p></li>
<li><p>تصویر به دست آمده در مرحله قبل را در کرنل بالا (البته با درایه‌های آن که در 4 ضرب شده‌اند) کانوالو می‌کنیم. با این کار مقدار پیکسل‌های جدید معرفی شده در مرحلهٔ قبل که با صفر پر شده بودند، تخمین زده می‌شوند.</p></li>
</ul>

<p>دو رویهٔ بالا (یعنی کوچک نمایی و بزرگ‌نمایی)، در توابع pyrDown و pyrUp پیاده سازی شده‌اند.</p>

<h2>کد</h2>

<pre><code class="language-c++">#include "opencv2/imgproc/imgproc.hpp"
#include "opencv2/highgui/highgui.hpp"
#include &lt;math.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

using namespace cv;

/// Global variables
Mat src, dst, tmp;
char* window_name = "Pyramids Demo";

/**
 * @function main
 */
int main( int argc, char** argv )
{
  /// General instructions
  printf( "\n Zoom In-Out demo  \n " );
  printf( "------------------ \n" );
  printf( " * [u] -&gt; Zoom in  \n" );
  printf( " * [d] -&gt; Zoom out \n" );
  printf( " * [ESC] -&gt; Close program \n \n" );

  /// Test image - Make sure it s divisible by 2^{n}
  src = imread( argv[1] );
  if( !src.data )
    { printf(" No data! -- Exiting the program \n");
      return -1; }

  tmp = src;
  dst = tmp;

  /// Create window
  namedWindow( window_name, CV_WINDOW_AUTOSIZE );
  imshow( window_name, dst );

  /// Loop
  while( true )
  {
    int c;
    c = waitKey(10);

    if( (char)c == 27 )
      { break; }
    if( (char)c == 'u' )
      { pyrUp( tmp, dst, Size( tmp.cols*2, tmp.rows*2 ) );
        printf( "** Zoom In: Image x 2 \n" );
      }
    else if( (char)c == 'd' )
     { pyrDown( tmp, dst, Size( tmp.cols/2, tmp.rows/2 ) );
       printf( "** Zoom Out: Image / 2 \n" );
     }

    imshow( window_name, dst );
    tmp = dst;
  }
  return 0;
}
</code></pre>

<h2>توضیح</h2>

<p>در خط 44 مشخص شده که اگر کاربر کلید ESC را فشار دهد از برنامه خارج شود.</p>

<p>در خط 46 مشخص شده که اگر کاربر کلید u را فشار دهد عمل بزرگ‌نمایی توسط تابع pyrUp انجام شود. این تابع سه آرگومان دارد:</p>

<ul>
<li><p>tmp: تصویر ورودی است. در ابتدا برابر با تصویر src است.</p></li>
<li><p>dst: تصویر خروجی است (همان که برروی صفحه نمایش داده خواهد شد و در حقیقت دو برابر تصویر ورودی است).</p></li>
<li><p><code>Size(tmp.cols\*2, tmp.rows\*2)</code>: اندازهٔ تصویر خروجی است. از آنجایی که قصد بزرگ‌نمایی داریم، تابع pyrUp انتظار دارد که این اندازه دو برابر اندازهٔ تصویر ورودی باشد.</p></li>
</ul>

<p>در خط 50 مشخص شده که اگر کاربر کلید d را فشار دهد عمل کوچک نمایی توسط تابع pyrDown انجام شود. این تابع سه آرگومان دارد:</p>

<ul>
<li><p>tmp: تصویر ورودی است. در ابتدا برابر با تصویر src است.</p></li>
<li><p>dst: تصویر خروجی است (همان که برروی صفحه نمایش داده خواهد شد و در حقیقت نصف تصویر ورودی است).</p></li>
<li><p><code>Size(tmp.cols/2 , tmp.rows/2)</code>: اندازهٔ تصویر خروجی است. از آنجایی که قصد کوچک نمایی داریم، تابع pyrDown انتظار دارد که این اندازه نصف اندازهٔ تصویر ورودی باشد.</p></li>
</ul>

<p>توجه داشته باشید که ابعاد تصویر ورودی به توابع pyrDown و pyrUp باید حتماً ضریبی از دو باشد، در غیر این صورت خطایی مبتنی بر رعایت نکردن این محدودیت دریافت خواهید کرد.</p>

<h2>خروجی</h2>

<p>برنامه را به صورت زیر اجرا می‌کنیم:</p>

<pre><code class="language-powershell">PyrUpDown.exe "PICTURES /1.jpg"
</code></pre>

<table>
<col align="center" />
<thead>
<tr>
	<th><img src="/opencv-book/media/image52.jpg" alt="تصویر ورودی" id="" /></th>
</tr>
</thead>
<tbody>
<tr>
	<td align="center">تصویر ورودی</td>
</tr>
</tbody>
</table>

<table>
<col align="center" />
<thead>
<tr>
	<th><img src="/opencv-book/media/image53.jpg" alt="نتیجه دو بار کوچک‌نمایی تصویر اصلی" id="" /></th>
</tr>
</thead>
<tbody>
<tr>
	<td align="center">نتیجهٔ دو بار کوچک‌نمایی تصویر اصلی</td>
</tr>
</tbody>
</table>

<table>
<col align="center" />
<thead>
<tr>
	<th><img src="/opencv-book/media/image54.jpg" alt="نتیجه دو بار بزرگ‌نمایی تصویر کوچک شده" id="" /></th>
</tr>
</thead>
<tbody>
<tr>
	<td align="center">نتیجه دو بار بزرگ‌نمایی تصویر کوچک شده</td>
</tr>
</tbody>
</table>

<p>همانطور که می‌بینید تصویر آخر دارای وضوح کمتری نسبت به تصویر ورودی است.</p>

<div class="footnotes">
<hr />
<ol>

<li id="fn:a"><p>Gaussian pyramid<a href="#fnref:a" class="reversefootnote">&#160;&#8617;</a></p></li>

<li id="fn:b"><p>Laplacian pyramid<a href="#fnref:b" class="reversefootnote">&#160;&#8617;</a></p></li>

</ol>
</div>

    </div>
  


</div>

<div class="section">
    <nav class="pagination" role="navigation" aria-label="pagination">
    <a href="/opencv-book/chapter02/lesson09/drawing/" class="pagination-previous button is-primary is-outlined">
    →
    مولد عدد تصادفی و ترسیم متن
  </a>




  <a href="/opencv-book/chapter02/lesson11/threshold/" class="pagination-next button is-primary is-outlined">
    آستانه‌گذاری
    ←
  </a>
    </nav>
</div>
    </div>

  </section>

  <footer class="columns hero section is-dark has-text-centered">
        <div class="container ">
            <div class="columns">

                <div class="column">
                    <div class="footer-header">
                       به این جاها سر بزنید
                    </div>
                    <ul class="related-links has-text-centered">
                        <li>
                            <a href="/opencv-book/pdf/opencv-book-v1.pdf" target="_blank">دریافت کتاب با فرمت پی‌دی‌اف</a>
                        </li>
                        <li>
                            <a href="https://github.com/h4iku/opencv-book/issues" target="_blank">گزارش مشکلات</a>
                        </li>
                    </ul>
                </div>
                <div class="column">
                    <div class="footer-header">
                    پردازش تصویر در OpenCV
                    </div>
                    <div class="socials">
                      <a href="/opencv-book">
                        <img class="cover" src="/opencv-book/media/cover-small.jpg">
                      </a>
                    </div>
                </div>


                </div>
            </div>
            <div class="has-text-centered credit">
              <div>
                ارائه شده بر بستر
                <a href="https://miraxy.github.io/doc-fa/" target="_blank">«میرا»</a>
                و قالب از
                <a href="https://dutymess.github.io/laravel-0-to-60/" target="_blank">
                «لاراول، از صفر تا شصت»
              </a>                
              </div>
            </div>
        </div>
    </footer>


    
<script type="text/javascript" src="/opencv-book/static/js/jquery.min.js"></script>
<script src="/opencv-book/static/js/highlight.pack.js"></script>
<script src="/opencv-book/static/js/highlightjs-line-numbers.min.js"></script>
<script src="/opencv-book/static/js/app.js"></script>

<script>
    renderMathInElement(document.body,{ delimiters:
      [
       {left: "$$", right: "$$", display: true},
       {left: "$", right: "$", display: false}
      ]
    });
</script>

<script>
    // Trim extra blank line of the codes
    var y = document.querySelectorAll("pre code");
    for(var i = 0; i < y.length; i++) {
      y[i].innerHTML = y[i].innerHTML.trimRight();
    }
</script>

</body>
</html>